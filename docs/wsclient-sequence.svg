<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="652px" preserveAspectRatio="none" style="width:747px;height:652px;" version="1.1" viewBox="0 0 747 652" width="747px" zoomAndPan="magnify"><defs><filter height="300%" id="fne7vezzqxy2x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="637.9219" style="stroke: #A80036; stroke-width: 1.0;" width="582.5" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="250.75" y="16.5684">wsclient-app</text><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="437.6582" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="57.5" y="127.2871"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62.5" y="161.5977"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="387.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="241.5" y="161.5977"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="211.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="401.5" y="337.4609"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="173.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="406.5" y="374.7715"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="104.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="525.5" y="409.082"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62" x2="62" y1="88.2871" y2="573.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="246.5" x2="246.5" y1="88.2871" y2="573.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="406.5" x2="406.5" y1="88.2871" y2="573.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="530.5" x2="530.5" y1="88.2871" y2="573.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="661.5" x2="661.5" y1="88.2871" y2="573.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="8" y="69.3105">«Singleton EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="26.5" y="85.7988">CallTimer</text><ellipse cx="62.5" cy="39.3105" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="58.5,27.3105,64.5,22.3105,62.5,27.3105,64.5,32.3105,58.5,27.3105" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="8" y="586.9453">«Singleton EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="26.5" y="603.4336">CallTimer</text><ellipse cx="62.5" cy="621.9219" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="58.5,609.9219,64.5,604.9219,62.5,609.9219,64.5,614.9219,58.5,609.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="194.5" y="69.3105">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="206.5" y="85.7988">TwitterCall</text><ellipse cx="246.5" cy="39.3105" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="242.5,27.3105,248.5,22.3105,246.5,27.3105,248.5,32.3105,242.5,27.3105" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="194.5" y="586.9453">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="206.5" y="603.4336">TwitterCall</text><ellipse cx="246.5" cy="621.9219" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="242.5,609.9219,248.5,604.9219,246.5,609.9219,248.5,614.9219,242.5,609.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="354.5" y="69.3105">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="373.5" y="85.7988">FileStore</text><ellipse cx="406.5" cy="39.3105" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="402.5,27.3105,408.5,22.3105,406.5,27.3105,408.5,32.3105,402.5,27.3105" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="354.5" y="586.9453">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="373.5" y="603.4336">FileStore</text><ellipse cx="406.5" cy="621.9219" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="402.5,609.9219,408.5,604.9219,406.5,609.9219,408.5,614.9219,402.5,609.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="478.5" y="69.3105">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="484" y="85.7988">MsGraphCall</text><ellipse cx="530.5" cy="39.3105" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="526.5,27.3105,532.5,22.3105,530.5,27.3105,532.5,32.3105,526.5,27.3105" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="478.5" y="586.9453">«Stateless EJB»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="484" y="603.4336">MsGraphCall</text><ellipse cx="530.5" cy="621.9219" fill="#FEFECE" filter="url(#fne7vezzqxy2x)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="526.5,609.9219,532.5,604.9219,530.5,609.9219,532.5,614.9219,526.5,609.9219" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fne7vezzqxy2x)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="596.5" y="32.3105"/><rect fill="#FEFECE" filter="url(#fne7vezzqxy2x)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="592.5" y="36.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="599.5" y="57.3105">«HTTP Resource»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="621" y="73.7988">Public APIs</text><rect fill="#FEFECE" filter="url(#fne7vezzqxy2x)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="596.5" y="572.9453"/><rect fill="#FEFECE" filter="url(#fne7vezzqxy2x)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="592.5" y="576.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="599.5" y="597.9453">«HTTP Resource»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="621" y="614.4336">Public APIs</text><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="437.6582" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="57.5" y="127.2871"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62.5" y="161.5977"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="387.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="241.5" y="161.5977"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="211.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="401.5" y="337.4609"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="173.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="406.5" y="374.7715"/><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="104.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="525.5" y="409.082"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="62.5" x2="109.5" y1="114.5977" y2="114.5977"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="109.5" y1="114.5977" y2="127.5977"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68.5" x2="109.5" y1="127.5977" y2="127.5977"/><polygon fill="#A80036" points="78.5,123.5977,68.5,127.5977,78.5,131.5977,74.5,127.5977" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="74.5" y="109.8555">@PostConstruct start timer</text><polygon fill="#A80036" points="229.5,157.5977,239.5,161.5977,229.5,165.5977,233.5,161.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="72.5" x2="235.5" y1="161.5977" y2="161.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="79.5" y="157.166">@Timeout fire event</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="114.5" y1="196.2188" y2="196.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="114.5" x2="114.5" y1="196.2188" y2="209.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67.5" x2="114.5" y1="209.2188" y2="209.2188"/><polygon fill="#A80036" points="77.5,205.2188,67.5,209.2188,77.5,213.2188,73.5,209.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="79.5" y="191.4766">next @Timeout</text><polygon fill="#A80036" points="724.5,229.2188,734.5,233.2188,724.5,237.2188,728.5,233.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251.5" x2="730.5" y1="233.2188" y2="233.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="258.5" y="228.7871">&lt;&lt;Request&gt;&gt;</text><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="40.6211" style="stroke: #000000; stroke-width: 2.0;" width="141" x="589.5" y="241.5293"/><polygon fill="#EEEEEE" points="589.5,241.5293,653.5,241.5293,653.5,248.5293,643.5,258.5293,589.5,258.5293,589.5,241.5293" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="602.5" y="256.0977">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="628" y="275.0977">Twitter API</text><polygon fill="#A80036" points="262.5,304.1504,252.5,308.1504,262.5,312.1504,258.5,308.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256.5" x2="735.5" y1="308.1504" y2="308.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="268.5" y="303.7188">&lt;&lt;Response&gt;&gt;</text><polygon fill="#A80036" points="389.5,333.4609,399.5,337.4609,389.5,341.4609,393.5,337.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251.5" x2="395.5" y1="337.4609" y2="337.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="258.5" y="333.0293">store serialised JSON</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="411.5" x2="458.5" y1="362.082" y2="362.082"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="458.5" x2="458.5" y1="362.082" y2="375.082"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="417.5" x2="458.5" y1="375.082" y2="375.082"/><polygon fill="#A80036" points="427.5,371.082,417.5,375.082,427.5,379.082,423.5,375.082" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="423.5" y="357.3398">create ZIP file</text><polygon fill="#A80036" points="513.5,405.082,523.5,409.082,513.5,413.082,517.5,409.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="416.5" x2="519.5" y1="409.082" y2="409.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="423.5" y="404.6504">upload ZIP file</text><polygon fill="#A80036" points="724.5,434.3926,734.5,438.3926,724.5,442.3926,728.5,438.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="535.5" x2="730.5" y1="438.3926" y2="438.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="542.5" y="433.9609">&lt;&lt;Request&gt;&gt;</text><rect fill="#FFFFFF" filter="url(#fne7vezzqxy2x)" height="40.6211" style="stroke: #000000; stroke-width: 2.0;" width="141" x="589.5" y="446.7031"/><polygon fill="#EEEEEE" points="589.5,446.7031,653.5,446.7031,653.5,453.7031,643.5,463.7031,589.5,463.7031,589.5,446.7031" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="602.5" y="461.2715">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="620.5" y="480.2715">MS Graph API</text><polygon fill="#A80036" points="541.5,509.3242,531.5,513.3242,541.5,517.3242,537.5,513.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="535.5" x2="735.5" y1="513.3242" y2="513.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="547.5" y="508.8926">&lt;&lt;Response&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="416.5" x2="458.5" y1="547.9453" y2="547.9453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="458.5" x2="458.5" y1="547.9453" y2="560.9453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="411.5" x2="458.5" y1="560.9453" y2="560.9453"/><polygon fill="#A80036" points="421.5,556.9453,411.5,560.9453,421.5,564.9453,417.5,560.9453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="423.5" y="543.2031">delete ZIP file</text><!--
@startuml
box "wsclient-app"
control CallTimer <<Singleton EJB>>
control TwitterCall <<Stateless EJB>>
control FileStore <<Stateless EJB>>
control MsGraphCall <<Stateless EJB>>
end box
collections PubAPIs as "Public APIs" <<HTTP Resource>>

CallTimer -> CallTimer : @PostConstruct start timer
activate CallTimer

CallTimer - -> TwitterCall: @Timeout fire event
activate CallTimer
activate TwitterCall
CallTimer -> CallTimer: next @Timeout
deactivate CallTimer

TwitterCall ->] : <<Request>>
ref over PubAPIs: Twitter API
TwitterCall <-] : <<Response>>
TwitterCall -> FileStore : store serialised JSON
activate FileStore

FileStore -> FileStore : create ZIP file
activate FileStore
FileStore -> MsGraphCall : upload ZIP file
activate MsGraphCall
MsGraphCall ->] : <<Request>>
ref over PubAPIs: MS Graph API
MsGraphCall <-] : <<Response>>
deactivate MsGraphCall
FileStore -> FileStore : delete ZIP file
deactivate FileStore
deactivate FileStore
deactivate TwitterCall
@enduml

PlantUML version 1.2017.20(Mon Dec 11 16:57:05 GMT 2017)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.13.2
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>